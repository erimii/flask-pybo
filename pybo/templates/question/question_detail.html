{% extends 'base.html' %}
{% block content %}
	<!-- flash ì˜¤ë¥˜ -->
    {% for message in get_flashed_messages() %}
    <div class="alert alert-danger" role="alert">
        {{ message }}
    </div>
    {% endfor %}
        <!-- ì§ˆë¬¸ ì œëª© -->
        <h1>{{ question.subject }}</h1>

        <!-- ì§ˆë¬¸ ë³¸ë¬¸ -->
        <div class="question-content">
            {{ question.content }}
        </div>

        <!-- ì§ˆë¬¸ ì‘ì„±ì, ì‘ì„±ì¼ (ì˜¤ë¥¸ìª½ ì •ë ¬) -->
		<div class="answer-meta">
		  <span class="answer-author">ì‘ì„±ì: {{ question.user.username }}</span><br>
		  <span class="answer-date">ì‘ì„±ì¼ì‹œ:{{ question.create_date.strftime('%Y-%m-%d %H:%M') }}</span><br>
		  {% if question.modify_date %}
		  <span class="answer-date" style="text-align: center; font-size: 0.8em; color: #999;">(ìˆ˜ì •ë¨: {{ question.modify_date.strftime('%Y-%m-%d %H:%M') }})</span>
		  {% endif %}
		</div>
		
		{% if g.user and g.user.id == question.user_id %}
		  <div style="text-align: right; margin-top: 10px;">
			<a href="{{ url_for('question.modify', question_id=question.id) }}" class="btn">ğŸ–‹ìˆ˜ì •</a>
			<a href="{{ url_for('question.delete', question_id=question.id) }}" class="btn" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ğŸ—‘ì‚­ì œ</a>
		  </div>
		{% endif %}
		<div style="text-align: right; margin-top: 10px;">
		{% if g.user in question.voter %}
			<a href="{{ url_for('question.vote', question_id=question.id) }}">
				ğŸ‘ ì·¨ì†Œ ({{ question.voter|length }})
			</a> 
		{% else %}
			<a href="{{ url_for('question.vote', question_id=question.id) }}">
				ğŸ‘ ì¶”ì²œ ({{ question.voter|length }})
			</a>
		{% endif %}
		</div>



        <!-- ë‹µë³€ ê°œìˆ˜ -->
        <h5>{{ question.answer_set|length }}ê°œì˜ ë‹µë³€ì´ ìˆìŠµë‹ˆë‹¤.</h5>

        <!-- ë‹µë³€ ëª©ë¡ -->
        <ul>
        {% for answer in question.answer_set %}
		<a id="answer_{{ answer.id }}"></a>
            <li>
                <div class="answer-content">{{ answer.content }}</div>
				
				<div class="answer-meta">
					<span class="answer-author">ì‘ì„±ì: {{ answer.user.username }}</span><br>
					<span class="answer-date">{{ answer.create_date.strftime('%Y-%m-%d %H:%M') }}</span><br>
					{% if answer.modify_date %}
						<div style="text-align: center; font-size: 0.8em; color: #999;">
							(ìˆ˜ì •ë¨: {{ answer.modify_date.strftime('%Y-%m-%d %H:%M') }})
						</div>
					{% endif %}
					{% if g.user and g.user.id == answer.user_id %}
					  <div style="text-align: right; margin-top: 5px;">
						<a href="{{ url_for('answer.modify', answer_id=answer.id) }}">ğŸ–‹</a>
						<span style= "margin-left:6px;"></span>
						<a href="{{ url_for('answer.delete', answer_id=answer.id) }}"
						   onclick="return confirm('ë‹µë³€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">ğŸ—‘</a>
					  </div>
					{% endif %}
{% if g.user in answer.voter %}
    <a href="{{ url_for('answer.vote', answer_id=answer.id) }}">
        ì·¨ì†Œ({{ answer.voter|length }})
    </a>
{% else %}
    <a href="{{ url_for('answer.vote', answer_id=answer.id) }}">
        ğŸ‘({{ answer.voter|length }})
    </a>
{% endif %}
				</div>


            </li>
        {% endfor %}
        </ul>

        <!-- ë‹µë³€ ë“±ë¡ í¼ -->
        <form action="{{ url_for('answer.create', question_id=question.id) }}" method="post">
            <textarea name="content" id="content" rows="10" placeholder="ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
            <input type="submit" value="ë‹µë³€ ë“±ë¡">
        </form>
{% endblock %}